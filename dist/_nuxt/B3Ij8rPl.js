const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./B_pkCTy7.js","./rQgUpoam.js","./CX_hZqBa.js","./qEfkgdYJ.js","./myLoading.CC1gQnfh.css","./myFooter.IIGiciIY.css","./Jb0QBs_6.js","./myError.ChItpPcu.css","./B6GcUipP.js","./about.CCSBnLmL.css","./CEFrgrG-.js","./DZ_zasnl.js","./myInput.CF3uejg-.css","./Bg9iiVWQ.js","./VIcon.B5Xsg-Kr.css","./admin.W46i2JWT.css","./DW7l8WV3.js","./event.e_6dH5uW.css","./CTc-Ze0R.js","./eventi.yDPw6l8C.css","./Cz-TfDVW.js","./home.Cmq5mMzU.css","./XPfzlncB.js","./iscrizione.D8jl_6eM.css","./DmCrULIA.js","./BtZzEF0O.js","./satispay.Clc5snzu.css","./Djvh2079.js","./vini.CGoXe-is.css","./-kHwvFT3.js","./vino.lhcSzJFe.css"])))=>i.map(i=>d[i]);
import{g as Ie,a as ze,t as ce,c as Ve,p as Y,b as J,d as $e,_ as Ee}from"./qEfkgdYJ.js";import{_ as Z}from"./DZ_zasnl.js";import{_ as Q,r as p,o as ye,e as Ce,t as C,v as m,x as o,y as P,F as e,M as ke,z as u,D as q,E as R,B as w,N as ee,O as _e,H as N,P as M,Q as Pe,A as x,J as X,G as le}from"./CX_hZqBa.js";import{V as F}from"./Bg9iiVWQ.js";import{Q as De}from"./BtZzEF0O.js";import{u as be}from"./B6GcUipP.js";const Ae={class:"modal-overlay"},Se={class:"modal-box"},we={key:0},Te={key:1},Le={key:2},Ue={key:3},Me={key:4},Re={key:5},he={class:"btns"},Oe={__name:"myAdminModal",props:{mode:String,id:{Type:Number,default:null},name:String,idEvento:{Type:Number,default:null}},emits:["close","reload"],setup(h,{emit:k}){const f=k,g=h,l=p({}),z=p(!1),r=p(""),i=g.mode=="Modifica",$=g.mode=="Aggiungi",s=g.name,v=p(!1),A=s=="Home"||s=="About"||s=="Events";i&&(s!="Loghi"?Ie(c()).then(function(y){y.ok?(A?(l.value=y.paragrafo,r.value=n(y.paragrafo.Testo)):s=="Contatti"?l.value=ze(y.paragrafi):l.value=y[s.toLowerCase()],s=="Vino"&&(v.value=l.Offerta!=null)):alert(y.msg??"ERRORE 222")}):(l.value.loghi0=null,l.value.loghi1=null)),ye(()=>{const y=t=>{t.key==="Escape"&&T()};window.addEventListener("keydown",y),Ce(()=>{window.removeEventListener("keydown",y)})});function c(){let y;return A||s=="Contatti"?y=`https://bertolotti.ct.ws/getParagraphs?page=${s=="Contatti"?"footer":s.toLowerCase()}&id=${g.id}`:y=`https://bertolotti.ct.ws/get${s}?id=${g.id}`,y}function V(y){let t=y.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return t=t.replace(/\*(.*?)\*/g,"<b>$1</b>"),t=t.replace(/_(.*?)_/g,"<i>$1</i>"),t.includes(`
`)?t.split(/\r?\n/).map(E=>E.trim()).filter(Boolean).map(E=>`<p>${E}</p>`).join(`
`):`<p>${t.trim()}</p>`}function n(y){let t=y==null?void 0:y.replace(/<b>(.*?)<\/b>/gi,"*$1*");return t=t==null?void 0:t.replace(/<i>(.*?)<\/i>/gi,"_$1_"),t=t==null?void 0:t.replace(/<p>(.*?)<\/p>/gi,`$1
`),t=t==null?void 0:t.trim(),t}async function L(){let y="https://bertolotti.ct.ws/"+($?"add":"mod")+(s=="Loghi"?"LoghiImages":s),t=null,{myFile:d,...E}=Object.assign({},l.value);i?(A?(E={},E.testo=V(r.value)):z.value&&(s=="Loghi"?(console.log(l.value),l.value.loghi0!=null?(t={},t.loghi0=l.value.loghi0,l.value.loghi1!=null&&(t.loghi1=l.value.loghi1)):l.value.loghi1!=null&&(t={},t.loghi1=l.value.loghi1),console.log("FILEEEE => ",t)):(t=l.value.myFile,E.changeImage=!0)),E.Id=g.id):$&&(s=="Iscrizione"?(E.IdEvento=g.idEvento,E.forzaPosti=!0,l.MetodoPagamento!="S"&&l.PaymentId&&delete E.PaymentId,l.PaymentId&&(E.PaymentId=E.PaymentId.replaceAll(" ","-"))):t=d),document.body.classList.add("cursorWait");let _=await(s=="Evento"||s=="Vino"||s=="Loghi"?Ve(y,E,t):Y(y,E));document.body.classList.remove("cursorWait"),_.ok?(f("reload"),alert("Azione eseguita con successo!"),T()):alert(_.msg)}function T(){f("close")}return(y,t)=>{var E,_,B,G,H,W,j,b,I,S,O,D,U,oe,ae,ne,ie,ue,de,se,re,me,ve,pe,fe,ge;const d=Z;return m(),C("div",Ae,[o("div",Se,[o("h2",null,P(g.mode)+" "+P(e(A)?"Paragrafo":e(s)),1),o("form",{onSubmit:t[45]||(t[45]=ke(a=>L(),["prevent"]))},[e(s)=="Iscrizione"?(m(),C("div",we,[u(d,{label:"Nome",placeholder:"Nome",modelValue:e(l).Nome,"onUpdate:modelValue":t[0]||(t[0]=a=>e(l).Nome=a),required:"","default-value":i?(E=e(l))==null?void 0:E.Nome:null},null,8,["modelValue","default-value"]),u(d,{label:"Cognome",placeholder:"Cognome",modelValue:e(l).Cognome,"onUpdate:modelValue":t[1]||(t[1]=a=>e(l).Cognome=a),required:"","default-value":i?(_=e(l))==null?void 0:_.Cognome:null},null,8,["modelValue","default-value"]),u(d,{label:"Cellulare",placeholder:"Cellulare",type:"tel",modelValue:e(l).Cellulare,"onUpdate:modelValue":t[2]||(t[2]=a=>e(l).Cellulare=a),"default-value":i?(B=e(l))==null?void 0:B.Cellulare:null},null,8,["modelValue","default-value"]),u(d,{label:"Come ha pagato",placeholder:"Metodo di pagamento",type:"select",data:[{text:"Satispay",value:"S"},{text:"Contanti",value:"C"},{text:"/",value:"/"}],modelValue:e(l).MetodoPagamento,"onUpdate:modelValue":t[3]||(t[3]=a=>e(l).MetodoPagamento=a),required:"","default-value":i?(G=e(l))==null?void 0:G.MetodoPagamento:null},null,8,["modelValue","default-value"]),e(l).MetodoPagamento=="S"?(m(),q(d,{key:0,label:"Codice pagamento (andare sulla transazione -> ricevuta -> UID pagamento)",placeholder:"Codice pagamento",modelValue:e(l).PaymentId,"onUpdate:modelValue":t[4]||(t[4]=a=>e(l).PaymentId=a),required:""},null,8,["modelValue"])):R("",!0),u(d,{label:"Data",type:"datetime-local",modelValue:e(l).Data,"onUpdate:modelValue":t[5]||(t[5]=a=>e(l).Data=a),"default-value":i?(H=e(l))==null?void 0:H.Data:new Date().toISOString().slice(0,16),required:""},null,8,["modelValue","default-value"])])):e(s)=="Evento"?(m(),C("div",Te,[u(d,{label:"Titolo",placeholder:"Titolo",modelValue:e(l).Titolo,"onUpdate:modelValue":t[6]||(t[6]=a=>e(l).Titolo=a),required:"","default-value":i?(W=e(l))==null?void 0:W.Titolo:null},null,8,["modelValue","default-value"]),u(d,{label:"Descrizione",placeholder:"Descrizione",type:"textarea",modelValue:e(l).Descrizione,"onUpdate:modelValue":t[7]||(t[7]=a=>e(l).Descrizione=a),required:"","default-value":i?(j=e(l))==null?void 0:j.Descrizione:null},null,8,["modelValue","default-value"]),u(d,{label:"Data",type:"date",modelValue:e(l).Data,"onUpdate:modelValue":t[8]||(t[8]=a=>e(l).Data=a),"default-value":i?(b=e(l))==null?void 0:b.Data:null},null,8,["modelValue","default-value"]),u(d,{label:"Scadenza iscrizione (se vuota sarà la data dell'evento)",type:"date",modelValue:e(l).ScadenzaIscrizione,"onUpdate:modelValue":t[9]||(t[9]=a=>e(l).ScadenzaIscrizione=a),"default-value":i?(I=e(l))==null?void 0:I.ScadenzaIscrizione:null},null,8,["modelValue","default-value"]),u(d,{label:"Ora d'inizio",type:"time",modelValue:e(l).OraInizio,"onUpdate:modelValue":t[10]||(t[10]=a=>e(l).OraInizio=a),required:"","default-value":i?(S=e(l))==null?void 0:S.OraInizio:null},null,8,["modelValue","default-value"]),u(d,{label:"Ora di fine",type:"time",modelValue:e(l).OraFine,"onUpdate:modelValue":t[11]||(t[11]=a=>e(l).OraFine=a),required:"","default-value":i?(O=e(l))==null?void 0:O.OraFine:null},null,8,["modelValue","default-value"]),u(d,{label:"Citta",placeholder:"Citta",modelValue:e(l).Citta,"onUpdate:modelValue":t[12]||(t[12]=a=>e(l).Citta=a),"default-value":i?(D=e(l))==null?void 0:D.Citta:"Busca"},null,8,["modelValue","default-value"]),u(d,{label:"Indirizzo",placeholder:"Indirizzo",modelValue:e(l).Indirizzo,"onUpdate:modelValue":t[13]||(t[13]=a=>e(l).Indirizzo=a),"default-value":i?(U=e(l))==null?void 0:U.Indirizzo:"Via Roberto d'azeglio 13, 12022 Busca"},null,8,["modelValue","default-value"]),u(d,{type:"image",label:"Immagine (consigliato in formato 9 : 16)",modelValue:e(l).myFile,"onUpdate:modelValue":t[14]||(t[14]=a=>e(l).myFile=a),required:$,"default-value":i?"/event/"+g.id:null,onChangedImage:t[15]||(t[15]=a=>z.value=!0)},null,8,["modelValue","default-value"]),u(d,{label:"Posti totali",type:"number",placeholder:"Posti disponibili",modelValue:e(l).PostiTotali,"onUpdate:modelValue":t[16]||(t[16]=a=>e(l).PostiTotali=a),required:"","default-value":i?(oe=e(l))==null?void 0:oe.PostiTotali:null},null,8,["modelValue","default-value"]),u(d,{label:"Prezzo",type:"price",placeholder:"Prezzo (10.99)",modelValue:e(l).Costo,"onUpdate:modelValue":t[17]||(t[17]=a=>e(l).Costo=a),required:"","default-value":i?(ae=e(l))==null?void 0:ae.Costo:null},null,8,["modelValue","default-value"])])):e(s)=="Vino"?(m(),C("div",Le,[u(d,{label:"Nome",placeholder:"Nome",modelValue:e(l).Nome,"onUpdate:modelValue":t[18]||(t[18]=a=>e(l).Nome=a),"default-value":i?(ne=e(l))==null?void 0:ne.Nome:null,required:""},null,8,["modelValue","default-value"]),u(d,{label:"Marca",placeholder:"Marca",modelValue:e(l).Marca,"onUpdate:modelValue":t[19]||(t[19]=a=>e(l).Marca=a),"default-value":i?(ie=e(l))==null?void 0:ie.Marca:null,required:""},null,8,["modelValue","default-value"]),u(d,{label:"Descrizione",placeholder:"Descrizione",type:"textarea",modelValue:e(l).Descrizione,"onUpdate:modelValue":t[20]||(t[20]=a=>e(l).Descrizione=a),"default-value":i?(ue=e(l))==null?void 0:ue.Descrizione:null,required:""},null,8,["modelValue","default-value"]),u(d,{label:"Colore",placeholder:"Colore",type:"select",data:e(ce)(["Rosso","Bianco","Rosato","Arancione","Grigio"]),modelValue:e(l).Colore,"onUpdate:modelValue":t[21]||(t[21]=a=>e(l).Colore=a),"default-value":i?(de=e(l))==null?void 0:de.Colore:null,required:""},null,8,["data","modelValue","default-value"]),u(d,{label:"Anno",placeholder:"Anno",type:"number",modelValue:e(l).Anno,"onUpdate:modelValue":t[22]||(t[22]=a=>e(l).Anno=a),"default-value":i?(se=e(l))==null?void 0:se.Anno:null,required:""},null,8,["modelValue","default-value"]),u(d,{label:"Regione",placeholder:"Regione",modelValue:e(l).Regione,"onUpdate:modelValue":t[23]||(t[23]=a=>e(l).Regione=a),"default-value":i?(re=e(l))==null?void 0:re.Regione:null},null,8,["modelValue","default-value"]),u(d,{label:"Quantità in litri",placeholder:"Quantità in litri",type:"price",modelValue:e(l).Quantita,"onUpdate:modelValue":t[24]||(t[24]=a=>e(l).Quantita=a),"default-value":i?(me=e(l))==null?void 0:me.Quantita:null,required:""},null,8,["modelValue","default-value"]),u(d,{type:"image",label:"Immagine (consigliato 220 x 780)",modelValue:e(l).myFile,"onUpdate:modelValue":t[25]||(t[25]=a=>e(l).myFile=a),"default-value":i?"/vini/"+g.id:null,required:$,onChangedImage:t[26]||(t[26]=a=>z.value=!0)},null,8,["modelValue","default-value"]),u(d,{label:"Prezzo",type:"price",placeholder:"Prezzo (10.99)",modelValue:e(l).Costo,"onUpdate:modelValue":t[27]||(t[27]=a=>e(l).Costo=a),"default-value":i?(ve=e(l))==null?void 0:ve.Costo:null,required:""},null,8,["modelValue","default-value"]),u(d,{label:"Prezzo in offerta",type:"price",placeholder:i&&e(l).Offerta==null?"Nessun offerta inserita":"Se non in offerta lasciare vuoto",modelValue:e(l).Offerta,"onUpdate:modelValue":t[28]||(t[28]=a=>e(l).Offerta=a),"default-value":i?e(l).Offerta??null:null},null,8,["placeholder","modelValue","default-value"]),u(d,{label:"Gradazione",type:"price",placeholder:"Gradazione (8.5)",modelValue:e(l).Gradazione,"onUpdate:modelValue":t[29]||(t[29]=a=>e(l).Gradazione=a),"default-value":i?e(l).Gradazione??null:null},null,8,["modelValue","default-value"]),u(d,{label:"Effervescenza",type:"select",placeholder:"Effervescenza",modelValue:e(l).Effervescenza,"onUpdate:modelValue":t[30]||(t[30]=a=>e(l).Effervescenza=a),"default-value":i?(pe=e(l))==null?void 0:pe.Effervescenza:null,required:"",data:e(ce)(["Mosso","Frizzante","Spumante","Fermo"])},null,8,["modelValue","default-value","data"]),u(d,{label:"Denominazione",placeholder:i&&e(l).Denominazione==null?"Nessuna denominazione inserita":"Se non si vuole inserire lasciare vuoto",modelValue:e(l).Denominazione,"onUpdate:modelValue":t[31]||(t[31]=a=>e(l).Denominazione=a),"default-value":i?(fe=e(l))==null?void 0:fe.Denominazione:null},null,8,["placeholder","modelValue","default-value"]),u(d,{label:"Spuntare se è da evidenziare",type:"checkbox",modelValue:e(l).Evidenzia,"onUpdate:modelValue":t[32]||(t[32]=a=>e(l).Evidenzia=a),placeholder:"In evidenzia","default-value":i?(ge=e(l))==null?void 0:ge.Evidenzia:!1},null,8,["modelValue","default-value"])])):e(A)?(m(),C("div",Ue,[t[46]||(t[46]=o("p",null,[w("Per mettere in grassetto circondare il testo tra _ : *"),o("b",null,"testo"),w("*")],-1)),t[47]||(t[47]=o("p",null,[w("Per mettere in corsivo circondare il testo tra _ : _"),o("i",null,"testo"),w("_")],-1)),u(d,{label:"Paragrafo",placeholder:"Scrivi qui il paragrafo",type:"textarea",modelValue:e(r),"onUpdate:modelValue":t[33]||(t[33]=a=>ee(r)?r.value=a:null),required:"","default-value":n(e(l).Testo),class:"paragraphTextArea"},null,8,["modelValue","default-value"])])):e(s)=="Contatti"?(m(),C("div",Me,[u(d,{label:"Nome cantina",placeholder:"Nome cantina",modelValue:e(l)[33],"onUpdate:modelValue":t[34]||(t[34]=a=>e(l)[33]=a),required:"","default-value":e(l)[33]},null,8,["modelValue","default-value"]),u(d,{type:"tel",label:"Numero di telefono",placeholder:"Numero di telefono",modelValue:e(l)[34],"onUpdate:modelValue":t[35]||(t[35]=a=>e(l)[34]=a),required:"","default-value":e(l)[34]},null,8,["modelValue","default-value"]),u(d,{type:"mail",label:"Email",placeholder:"Email",modelValue:e(l)[35],"onUpdate:modelValue":t[36]||(t[36]=a=>e(l)[35]=a),required:"","default-value":e(l)[35]},null,8,["modelValue","default-value"]),u(d,{label:"Indirizzo",placeholder:"Indirizzo",modelValue:e(l)[38],"onUpdate:modelValue":t[37]||(t[37]=a=>e(l)[38]=a),required:"","default-value":e(l)[38]},null,8,["modelValue","default-value"]),u(d,{label:"Link profilo Instagram",placeholder:"Link profilo Instagram",modelValue:e(l)[36],"onUpdate:modelValue":t[38]||(t[38]=a=>e(l)[36]=a),required:"","default-value":e(l)[36]},null,8,["modelValue","default-value"]),u(d,{label:"Link profilo Facebook",placeholder:"Link profilo Facebook",modelValue:e(l)[37],"onUpdate:modelValue":t[39]||(t[39]=a=>e(l)[37]=a),required:"","default-value":e(l)[37]},null,8,["modelValue","default-value"])])):(m(),C("div",Re,[u(d,{type:"image",label:"Logo grande (consigliato in formato 16 : 9)",modelValue:e(l).loghi1,"onUpdate:modelValue":t[40]||(t[40]=a=>e(l).loghi1=a),required:$,"default-value":"/loghi/loghi1",onChangedImage:t[41]||(t[41]=a=>z.value=!0)},null,8,["modelValue"]),u(d,{type:"image",label:"Icona (consigliato in formato piccolo 1 : 1)",modelValue:e(l).loghi0,"onUpdate:modelValue":t[42]||(t[42]=a=>e(l).loghi0=a),required:$,"default-value":"/loghi/loghi0",onChangedImage:t[43]||(t[43]=a=>z.value=!0)},null,8,["modelValue"])])),o("div",he,[t[48]||(t[48]=o("button",{type:"submit"},"💾 Salva",-1)),o("button",{class:"cancel",onClick:t[44]||(t[44]=a=>T()),type:"button"},"❌ Annulla")])],32)])])}}},te=Q(Oe,[["__scopeId","data-v-e629ec9c"]]),qe=(h,k,f)=>{const g=h[k];return g?typeof g=="function"?g():Promise.resolve(g):new Promise((l,z)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(z.bind(null,new Error("Unknown variable dynamic import: "+k+(k.split("/").length!==f?". Note that variables only represent file names one level deep.":""))))})},Ne={class:"admin-preview"},xe={class:"save-box"},Fe={class:"page-preview"},Qe={__name:"myAdminEdit",props:{page:String},setup(h){const f=h.page,g=p(!1),l=p(null),z=p(0),r=f.toLowerCase(),i=_e(()=>qe(Object.assign({"../pages/about.vue":()=>M(()=>import("./B_pkCTy7.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url),"../pages/admin.vue":()=>M(()=>import("./CEFrgrG-.js"),__vite__mapDeps([10,3,2,4,11,12,8,13,14,15]),import.meta.url),"../pages/dashboard.vue":()=>M(()=>Promise.resolve().then(()=>Tl),void 0,import.meta.url),"../pages/event.vue":()=>M(()=>import("./DW7l8WV3.js"),__vite__mapDeps([16,1,2,3,4,5,6,7,8,17]),import.meta.url),"../pages/eventi.vue":()=>M(()=>import("./CTc-Ze0R.js"),__vite__mapDeps([18,1,2,3,4,5,6,7,8,13,14,19]),import.meta.url),"../pages/home.vue":()=>M(()=>import("./Cz-TfDVW.js"),__vite__mapDeps([20,1,2,3,4,5,6,7,8,13,14,21]),import.meta.url),"../pages/iscrizione.vue":()=>M(()=>import("./XPfzlncB.js"),__vite__mapDeps([22,3,2,4,1,5,11,12,6,7,8,23]),import.meta.url),"../pages/satispay.vue":()=>M(()=>import("./DmCrULIA.js"),__vite__mapDeps([24,3,2,4,6,7,25,26]),import.meta.url),"../pages/vini.vue":()=>M(()=>import("./Djvh2079.js"),__vite__mapDeps([27,3,2,4,1,5,11,12,6,7,8,28]),import.meta.url),"../pages/vino.vue":()=>M(()=>import("./-kHwvFT3.js"),__vite__mapDeps([29,1,2,3,4,5,6,7,8,30]),import.meta.url)}),`../pages/${r=="events"?"eventi":r}.vue`,3)),$=p([]);r=="Events"?$.value=["https://bertolotti.ct.ws/img/event0.webp"]:$.value=[`https://bertolotti.ct.ws/img/${r}/${r}0.webp`,`https://bertolotti.ct.ws/img/${r}/${r}1.webp`,`https://bertolotti.ct.ws/img/${r}/${r}2.webp`,`https://bertolotti.ct.ws/img/${r}/${r}3.webp`,`https://bertolotti.ct.ws/img/${r}/${r}4.webp`];let s=[];function v(V){const n=document.createElement("input");n.type="file",n.accept="image/*",n.onchange=L=>{const T=L.target.files[0];if(!T)return;const y=new FileReader;y.onload=t=>{$.value[V]=t.target.result,s[`${r}${V}`]=T},y.readAsDataURL(T)},n.click()}function A(V){l.value=V,setTimeout(()=>{g.value=!0},0)}async function c(){document.body.classList.add("cursorWait");let V=await Ve(`https://bertolotti.ct.ws/mod${f}Images`,{},s);document.body.classList.remove("cursorWait"),V.ok?alert("Azione avvenuta con successo!"):alert(V.msg??"Errore sconosciuto (codice 6969)")}return(V,n)=>{const L=te;return m(),C(N,null,[o("div",Ne,[o("div",xe,[o("h2",null,"Qui puoi modificare paragrafi e immagini relativi alla pagina "+P(e(f)=="About"?"Visitaci":e(f)),1),n[2]||(n[2]=o("br",null,null,-1)),n[3]||(n[3]=o("p",null,"Per confermare le tue scelte premi il bottone in fondo a questa pagina",-1)),n[4]||(n[4]=o("br",null,null,-1)),n[5]||(n[5]=o("p",null,"(Per modifica le immagini fare doppio click)",-1)),n[6]||(n[6]=o("p",null,"(Per modifica i paragrafi basta cliccare)",-1))]),o("div",Fe,[(m(),q(e(i),{images:e($),onChangeImage:v,onChangeParagraph:A,editMode:!0,key:e(z)},null,8,["images"]))]),o("div",{class:"save-box"},[n[7]||(n[7]=o("p",null,"Hai finito di modificare la pagina.",-1)),o("button",{onClick:c,class:"btn"},"Salva Modifiche")])]),e(g)?(m(),q(L,{key:0,id:e(l),mode:"Modifica",name:e(f),onClose:n[0]||(n[0]=T=>g.value=!1),onReload:n[1]||(n[1]=T=>z.value++)},null,8,["id","name"])):R("",!0)],64)}}},Be=Q(Qe,[["__scopeId","data-v-e0d3b5ca"]]),Ge={class:"pagamenti-wrapper"},He={class:"filters"},We={class:"date-refresh-wrapper"},je={class:"totali"},Ke={class:"tot-box e"},Je={class:"tot-box r"},Xe={class:"tot-box netto"},Ye={class:"tot-box altroStatus"},Ze={key:0},el={key:1,class:"table-responsive"},ll={class:"importo-cell"},tl={class:"importo"},ol={key:0,class:"rimborso"},al={key:2},nl={__name:"myPagamenti",setup(h){const k=p(new Date().toISOString().slice(0,10)),f=p(!0),g=p([]),l=p(0),z=p(0),r=p(0),i=p(0);Pe(k,()=>{$()}),$();function $(){f.value=!0,g.value=[],l.value=0,r.value=0,z.value=0,i.value=0,document.body.classList.add("cursorWait"),Y("https://bertolotti.ct.ws/getDailyPagamenti",{date:k.value}).then(function(s){if(l.value=0,r.value=0,z.value=0,i.value=0,!s.ok)alert(s.msg);else{g.value=s.payments;for(const v of g.value)v.Status=="ACCEPTED"?v.Tipo=="E"?l.value+=parseInt(v.Importo):z.value+=parseInt(v.Importo):i.value+=parseInt(v.Importo);r.value=l.value-z.value,f.value=!1}document.body.classList.remove("cursorWait")})}return(s,v)=>{const A=Z;return m(),C("div",Ge,[o("div",He,[o("div",We,[u(A,{modelValue:e(k),"onUpdate:modelValue":v[0]||(v[0]=c=>ee(k)?k.value=c:null),type:"date",label:"Seleziona giorno",class:"date-picker"},null,8,["modelValue"]),o("button",{class:"refresh-btn",onClick:v[1]||(v[1]=c=>$()),title:"Aggiorna"},[u(F,{class:"icon"},{default:x(()=>v[2]||(v[2]=[w("mdi-refresh")])),_:1})])]),o("div",je,[o("div",Ke,[w(" 💰 Entrate del "+P(e(J)(e(k)))+": ",1),o("h2",null,P(e(l).toFixed(2))+" €",1)]),o("div",Je,[w(" 🔻 Rimborsi del "+P(e(J)(e(k)))+": ",1),o("h2",null,P(e(z).toFixed(2))+" €",1)]),o("div",Xe,[v[3]||(v[3]=w(" ⚖️ Netto (entrate - rimborsi)")),o("h2",null,P(e(r).toFixed(2))+" €",1)]),o("div",Ye,[v[4]||(v[4]=w(" 🔄 (Cancellati / in attesa)")),o("h2",null,P(e(i).toFixed(2))+" €",1)])])]),e(f)?(m(),C("div",Ze,v[5]||(v[5]=[o("h1",null,"Caricamento...",-1)]))):R("",!0),!e(f)&&e(g).length>0?(m(),C("div",el,[o("table",null,[v[6]||(v[6]=o("thead",null,[o("tr",null,[o("th",null,"Iscritto"),o("th",null,"Cellulare"),o("th",null,"Evento"),o("th",null,"Importo"),o("th",null,"Data")])],-1)),o("tbody",null,[(m(!0),C(N,null,X(e(g),c=>(m(),C("tr",{key:c.id},[o("td",null,P(c.Iscritto),1),o("td",null,P(c.Cellulare),1),o("td",null,P(c.Evento.Titolo)+" "+P(e(J)(c.Evento.Data)),1),o("td",ll,[o("span",tl,[u(F,{class:"icon",color:c.Status!=="ACCEPTED"?"#2f3208":c.Tipo==="E"?"green":"red"},{default:x(()=>[w(P(c.Status!=="ACCEPTED"?"mdi-cash-lock":c.Tipo==="E"?"mdi-cash-check":"mdi-cash-refund"),1)]),_:2},1032,["color"]),o("span",{class:le(c.Status=="ACCEPTED"?c.Tipo.toLowerCase():"altroColor")},"  "+P(parseInt(c.Importo).toFixed(2))+"€ ",3),c.Tipo==="R"||c.Status!=="ACCEPTED"?(m(),C("span",ol,P(c.Tipo==="R"?"(RIMBORSO)":c.Status=="PENDING"?"(IN ATTESA)":c.Status),1)):R("",!0)])]),o("td",null,P(new Date(c.Data).toLocaleString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1})),1)]))),128))])])])):R("",!0),!e(f)&&e(g).length==0?(m(),C("div",al,v[7]||(v[7]=[o("h1",null,"In questa data non sono presenti pagamenti!",-1)]))):R("",!0)])}}},il=Q(nl,[["__scopeId","data-v-dc7c2c19"]]),ul={class:"wrapper"},dl={class:"top-bar"},sl={class:"table-title"},rl={class:"table-responsive"},ml=["onClick"],vl=["innerHTML"],pl={key:0,class:"actions",style:{"max-width":"unset"}},fl=["onClick"],gl={key:1,class:"actions"},cl=["onClick"],bl=["onClick"],Vl={key:1},yl={key:0,class:"loadMoreDiv"},K=20,Cl={__name:"myAdminTable",props:{data:Object},emits:["updateTitolo"],setup(h,{emit:k}){const f=h,g=k,l=p(f.data.titolo),z=p(f.data.endpoint),r=p(f.data.name),i=p(f.data.showBtnSub??!1),$=p(!1),s=p([]),v=p(""),A=p(""),c=p(""),V=p(1),n=p(null),L=p(null),T=p(null),y=p(null);t();function t(){document.body.classList.add("cursorWait"),Y(`https://bertolotti.ct.ws/getAdmin${z.value}`,{search:v.value,sortBy:A.value,sortDir:c.value,limit:K,offset:(V.value-1)*K}).then(function(b){b.ok?b.data.length>0?(V.value===1?s.value=b.data:s.value.push(...b.data),n.value=Object.keys(s.value[0]).filter(I=>I!=="Id")):s.value=[]:alert(b.msg),document.body.classList.remove("cursorWait")})}function d(b){A.value===b?c.value=c.value==="ASC"?"DESC":"ASC":(A.value=b,c.value="ASC"),V.value=1,t()}function E(){V.value=1,t()}function _(){V.value*K<=s.value.length&&(V.value++,t())}function B(b){L.value=b,y.value="Modifica",$.value=!0}async function G(b){if(confirm("Sei sicuro di voler eliminare?")){let I={id:b};if(l.value=="Eventi"){if(!confirm("Eliminando l'evento verranno eliminati anche TUTTI gli iscritti relativi a quell'evento. Continuare?"))return}else l.value=="Iscrizioni"&&s.value.find(O=>O.Id==b).MetodoPagamento=="Satispay"&&(I.rimborso=confirm(`Stai per eliminare un'iscrizione fatta su satispay.
Schiaccia Ok per rimborsare.
Schiaccia Annulla per NON rimborsare.`));document.body.classList.add("cursorWait");let S=await Y("https://bertolotti.ct.ws/del"+r.value,I);document.body.classList.remove("cursorWait"),S.ok?(t(),alert("Azione avvenuta con successo")):alert(S.msg)}}function H(b){i.value=!1,l.value="Iscrizioni",r.value="Iscrizione",z.value=`Iscrizioni?costo=${b.Costo}&idEvento=${b.Id}`,s.value=[],T.value=b.Id,v.value="",A.value="",c.value="",V.value=1,t(),g("updateTitolo","Iscritti a "+b.Titolo)}function W(){$.value=!0,y.value="Aggiungi"}function j(b,I){let S;if(I=="Costo")if(l.value=="Vini")if(b.includes("-")){const[O,D]=b.split("-");S=`<div class="offerta-vini">
                        <div>${O}€</div>
                        <div>${D}€</div>
                     </div>`}else S=b+"€";else b=="0.00"?S="GRATIS":S=b+"€";else l.value=="Vini"&&(I=="Evidenzia"||I=="Offerta")?S=b?"Sì✅":"No❌":/^\d{4}-\d{2}-\d{2}$/.test(b)?S=J(b):l.value=="Iscrizioni"&&I=="Data"?S=new Date(b.replace(" ","T")).toLocaleString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}):S=b;return S}return(b,I)=>{const S=te,O=Z;return m(),C(N,null,[e($)?(m(),q(S,{key:0,onClose:I[0]||(I[0]=D=>$.value=!1),onReload:I[1]||(I[1]=D=>t()),mode:e(y),id:e(L),name:e(r),idEvento:e(T)??null},null,8,["mode","id","name","idEvento"])):R("",!0),o("div",ul,[o("div",dl,[o("div",null,[o("h2",sl,P(e(l)),1),e(i)?R("",!0):(m(),C("button",{key:0,class:"btn-aggiungi",onClick:I[2]||(I[2]=D=>W())},"➕ Aggiungi"))]),o("div",null,[u(O,{placeholder:"Cerca...",modelValue:e(v),"onUpdate:modelValue":I[3]||(I[3]=D=>ee(v)?v.value=D:null),onInvioPremuto:I[4]||(I[4]=D=>E())},null,8,["modelValue"]),o("button",{onClick:I[5]||(I[5]=D=>E()),id:"cerca"},"Cerca")])]),o("div",rl,[e(s).length>0?(m(),C("table",{key:0,class:le(e(l))},[o("thead",null,[o("tr",null,[(m(!0),C(N,null,X(e(n),D=>(m(),C("th",{key:D,onClick:U=>d(D)},P(e($e)(D)),9,ml))),128)),o("th",null,P(e(i)?"Vedi iscritti":"Azioni"),1)])]),o("tbody",null,[(m(!0),C(N,null,X(e(s),D=>(m(),C("tr",{key:D.id},[(m(!0),C(N,null,X(e(n),U=>(m(),C("td",{key:U,innerHTML:j(D[U],U)},null,8,vl))),128)),e(i)?(m(),C("td",pl,[o("div",null,[o("button",{class:"showBtnSub",onClick:U=>H(D)},"Vedi iscritti",8,fl)])])):(m(),C("td",gl,[o("div",null,[o("button",{onClick:U=>B(D.Id)},"✏️",8,cl),o("button",{class:"delete",onClick:U=>G(D.Id)},"🗑️",8,bl)])]))]))),128))])],2)):(m(),C("h1",Vl,"Nessun risultato per ' "+P(e(v))+" '",1))]),e(V)*K<=e(s).length?(m(),C("div",yl,[o("button",{onClick:_},[u(F,{class:"icon",style:{"margin-right":"8px"}},{default:x(()=>I[6]||(I[6]=[w("mdi-arrow-down")])),_:1}),I[7]||(I[7]=w(" Carica altri "))])])):R("",!0)])],64)}}},Il=Q(Cl,[["__scopeId","data-v-86d7c378"]]),zl={class:"admin-layout"},$l={class:"main"},El={key:0},kl={key:3,class:"qrCodeDiv"},_l={key:0,class:"qr-preview"},Pl=["src"],Dl=["href"],Al={href:"/home",id:"backHome"},Sl={__name:"dashboard",setup(h){be({title:"Dashboard"});const k=p(!1),f=p(null),g=p(null),l=p(null),z={Iscrizioni:{endpoint:"Eventi",titolo:"Scegli un'evento",name:"Iscrizione",showBtnSub:!0},Eventi:{endpoint:"Eventi",name:"Evento",titolo:"Eventi"},Vini:{endpoint:"Vini",name:"Vino",titolo:"Vini"},Home:{titolo:"Home"},About:{titolo:"About"},Events:{titolo:"Eventi"},Contatti:{titolo:"Contatti"},Loghi:{titolo:"Loghi"},"Genera QrCode":{titolo:"Genera QrCode"},"Pagamenti del giorno":{titolo:"Pagamenti del giorno"}};function r(V){f.value="",f.value=V,l.value=V+Math.random(),k.value=!1,g.value=z[V].titolo=="About"?"Visitaci":z[V].titolo,setTimeout(()=>{be({title:"Dashboard - "+g.value})},100)}ye(()=>{document.addEventListener("click",s)}),Ce(()=>{document.removeEventListener("click",s)});const i=p(null),$=p(null);function s(V){$.value.contains(V.target)?k.value=!0:k.value&&!i.value.contains(V.target)&&(k.value=!1)}const v=p(""),A=p(""),c=()=>{if(!v.value){A.value="";return}De.toDataURL(v.value).then(V=>{A.value=V}).catch(V=>{console.error("Errore nella generazione del QR Code:",V)})};return(V,n)=>{const L=Ee,T=te,y=Be,t=Z,d=il,E=Il;return m(),C(N,null,[u(L),o("div",zl,[o("aside",{class:le({open:e(k)}),ref_key:"sidebarRef",ref:i},[n[13]||(n[13]=o("div",{class:"logo"},"Pannello",-1)),o("nav",null,[o("button",{onClick:n[0]||(n[0]=_=>r("Eventi"))},"Eventi"),o("button",{onClick:n[1]||(n[1]=_=>r("Vini"))},"Vini"),o("button",{onClick:n[2]||(n[2]=_=>r("Iscrizioni"))},"Iscritti")]),n[14]||(n[14]=o("div",{class:"logo"},"Layout",-1)),o("nav",null,[o("button",{onClick:n[3]||(n[3]=_=>r("Home"))},"Home"),o("button",{onClick:n[4]||(n[4]=_=>r("About"))},"Visitaci"),o("button",{onClick:n[5]||(n[5]=_=>r("Events"))},"Eventi")]),n[15]||(n[15]=o("div",{class:"logo"},"Altro",-1)),o("nav",null,[o("button",{onClick:n[6]||(n[6]=_=>r("Pagamenti del giorno"))},"Pagamenti del giorno"),o("button",{onClick:n[7]||(n[7]=_=>r("Genera QrCode"))},"Genera QrCode"),o("button",{onClick:n[8]||(n[8]=_=>r("Contatti"))},"Contatti"),o("button",{onClick:n[9]||(n[9]=_=>r("Loghi"))},"Loghi")]),n[16]||(n[16]=o("div",{class:"logo"},"Ci sono problemi?",-1)),n[17]||(n[17]=o("nav",null,[o("button",{style:{"text-align":"center",cursor:"default"}},"366 391 3988")],-1))],2),o("div",$l,[o("header",null,[o("button",{class:"menu-toggle",ref_key:"menuMobileRef",ref:$},"☰",512),o("h1",null,P(e(g)??"Admin"),1)]),o("main",null,[e(f)?e(f)=="Contatti"||e(f)=="Loghi"?(m(),q(T,{key:1,onClose:n[10]||(n[10]=_=>f.value=null),name:e(f),mode:"Modifica"},null,8,["name"])):e(f)=="Home"||e(f)=="About"||e(f)=="Events"?(m(),q(y,{page:e(f),key:e(l)},null,8,["page"])):e(f)=="Genera QrCode"?(m(),C("div",kl,[n[20]||(n[20]=o("h2",null,"Genera il tuo QR Code",-1)),u(t,{modelValue:e(v),"onUpdate:modelValue":n[11]||(n[11]=_=>ee(v)?v.value=_:null),type:"text",placeholder:"Inserisci un link o un testo..."},null,8,["modelValue"]),o("button",{onClick:c,class:"btn"},"Genera"),e(A)?(m(),C("div",_l,[o("img",{src:e(A),alt:"QR Code generato"},null,8,Pl),o("a",{href:e(A),download:"qrcode.png",class:"btn"}," Scarica ",8,Dl)])):R("",!0)])):e(f)=="Pagamenti del giorno"?(m(),q(d,{key:e(l)})):(m(),q(E,{data:z[e(f)],key:e(l),onUpdateTitolo:n[12]||(n[12]=_=>g.value=_)},null,8,["data"])):(m(),C("h1",El,[n[19]||(n[19]=w(" Scegli cosa visualizzare nei tab a lato ")),u(F,{class:"icon",style:{"margin-left":"8px"}},{default:x(()=>n[18]||(n[18]=[w("mdi-arrow-left")])),_:1})]))])])]),o("a",Al,[u(F,{class:"icon"},{default:x(()=>n[21]||(n[21]=[w("mdi-home")])),_:1})])],64)}}},wl=Q(Sl,[["__scopeId","data-v-864c1582"]]),Tl=Object.freeze(Object.defineProperty({__proto__:null,default:wl},Symbol.toStringTag,{value:"Module"}));export{wl as default};
