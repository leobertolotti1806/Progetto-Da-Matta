import{g as D,_ as O,t as z}from"./qEfkgdYJ.js";import{_ as L,a as U}from"./rQgUpoam.js";import{_ as H}from"./DZ_zasnl.js";import{_ as R}from"./Jb0QBs_6.js";import{_ as j,C as q,r as y,I as G,t as i,z as d,D as V,E as C,F as o,x as a,y as r,A as Q,T as J,H as k,J as B,v as n,K,L as P,G as b}from"./CX_hZqBa.js";import{u as W}from"./B6GcUipP.js";const X={key:1},Y={class:"filtri-container"},Z={class:"search-bar"},ee={class:"filtri-avanzati"},te={class:"riga-filtri"},oe={class:"riga-ordina"},se={class:"vini-evidenziati"},ae={class:"flex-container"},le=["href"],re=["src","alt"],ne={class:"info"},ie={key:0},ce={class:"prezzo-originale"},ue={class:"prezzo-offerta"},de={key:1},fe={class:"quantita-bottiglia"},me={class:"vini-lista",id:"wines"},_e={key:0,class:"flex-container"},pe=["onClick","href"],ye={key:0,class:"etichetta"},he=["src","alt"],ge={class:"info"},ve={key:0},ze={class:"prezzo-originale"},Ve={class:"prezzo-offerta"},Ce={key:1},ke={class:"quantita-bottiglia"},be={key:1,style:{color:"rgba(84, 84, 84, 1)"}},Ae=15,Me={__name:"vini",setup(xe){W({title:"Vini"});const A=q({title:"",msg:"",link:"",linkMsg:""}),_=y(!1),u=G(),M=y(1),t=q({search:"",Marca:"",colore:"",effervescenza:"",sortBy:"",order:"ASC",limit:15,offset:(M.value-1)*Ae,firstTime:1});u.query.c?(t.colore=u.query.c,t.getAll=!0):u.query.e&&(t.effervescenza=u.query.e,t.getAll=!0);const x=y(null),f=y(null);let c={search:"test",Marca:"",colore:"",effervescenza:"",sortBy:"",order:"ASC"},p=null;function g(l=!1){t.search!=c.search||t.Marca!=c.Marca||t.colore!=c.colore||t.effervescenza!=c.effervescenza||t.sortBy!=c.sortBy||t.order!=c.order?(c.search=t.search,c.Marca=t.Marca,c.colore=t.colore,c.effervescenza=t.effervescenza,c.sortBy=t.sortBy,c.order=t.order,D("https://bertolotti.ct.ws/getVini",t).then(function(s){t.getAll&&delete t.getAll,s.ok?t.firstTime?(t.firstTime=0,x.value=s.inEvidenzia,f.value=s.vini,(u.query.c||u.query.e)&&v()):l?(f.value.push(...s.vini),M.value++):(f.value=s.vini,v()):(_.value=!0,A.msg=s.msg)})):v()}function v(){p==null&&(p=document==null?void 0:document.querySelector(".vini-lista")),requestAnimationFrame(()=>{p==null||p.scrollIntoView({behavior:"smooth",block:"start"})})}const h=y(!1);function E(){h.value=!h.value}function w(l){l.style.height="0",l.style.opacity="0",requestAnimationFrame(()=>{l.style.transition="height 0.3s ease, opacity 0.3s ease",l.style.height=l.scrollHeight+14+"px",l.style.opacity="1"})}function F(l){l.style.height=l.scrollHeight+"px",l.style.opacity="1",requestAnimationFrame(()=>{l.style.transition="height 0.3s ease, opacity 0.3s ease",l.style.height="0",l.style.opacity="0"})}return g(),(l,s)=>{var I;const $=O,S=L,m=H,T=U,N=R;return n(),i(k,null,[d($,{show:!o(_)&&!o(f)},null,8,["show"]),o(_)?C("",!0):(n(),V(S,{key:0})),o(_)?C("",!0):(n(),i("main",X,[a("section",Y,[a("div",Z,[a("div",null,[d(m,{type:"text",modelValue:o(t).search,"onUpdate:modelValue":s[0]||(s[0]=e=>o(t).search=e),placeholder:"Cerca un vino...",id:"cercaInput",onInvioPremuto:s[1]||(s[1]=e=>g())},null,8,["modelValue"]),a("button",{id:"cerca",onClick:s[2]||(s[2]=e=>g())},"Cerca")]),a("button",{class:"filtri-toggle",onClick:E},r(o(h)?"▲":"▼"),1)]),d(J,{onEnter:w,onLeave:F},{default:Q(()=>[K(a("div",ee,[a("div",te,[d(m,{label:"Colore",defaultValue:o(u).query.c??"Tutti",modelValue:o(t).colore,"onUpdate:modelValue":s[3]||(s[3]=e=>o(t).colore=e),type:"select",data:o(z)(["Tutti","Rosso","Bianco","Rosato","Arancione","Grigio"])},null,8,["defaultValue","modelValue","data"]),d(m,{label:"Effervescenza",defaultValue:o(u).query.e??"Tutti",modelValue:o(t).effervescenza,"onUpdate:modelValue":s[4]||(s[4]=e=>o(t).effervescenza=e),type:"select",data:o(z)(["Tutti","Fermo","Mosso","Frizzante","Spumante"])},null,8,["defaultValue","modelValue","data"]),d(m,{label:"Marca",placeholder:"Cerca per marca",modelValue:o(t).Marca,"onUpdate:modelValue":s[5]||(s[5]=e=>o(t).Marca=e)},null,8,["modelValue"])]),a("div",oe,[d(m,{label:"Ordina per",modelValue:o(t).sortBy,"onUpdate:modelValue":s[6]||(s[6]=e=>o(t).sortBy=e),type:"select",data:o(z)(["Marca","Nome","Anno","Costo","Effervescenza","Colore","Gradazione","Quantita"])},null,8,["modelValue","data"]),d(m,{label:"Senso",modelValue:o(t).order,"onUpdate:modelValue":s[7]||(s[7]=e=>o(t).order=e),type:"select",data:[{text:"Crescente",value:"ASC"},{text:"Decrescente",value:"DESC"}]},null,8,["modelValue"])])],512),[[P,o(h)]])]),_:1})]),a("section",se,[s[9]||(s[9]=a("h2",null,"Vini in evidenza",-1)),a("div",ae,[(n(!0),i(k,null,B(o(x),e=>(n(),i("a",{key:e.Id,class:"card evidenziato",href:`/vino?id=${e.Id}`},[s[8]||(s[8]=a("div",{class:"etichetta"},"In Evidenza",-1)),a("img",{src:`https://bertolotti.ct.ws/img/vini/${e.Id}.webp`,alt:e.Nome},null,8,re),a("div",ne,[a("h3",null,r(e.Nome+" "+(e!=null&&e.Anno?`(${e.Anno})`:"")),1),a("p",null,r(e.Marca),1),e.Offerta?(n(),i("strong",ie,[a("span",ce,r(e.Costo)+" €",1),a("span",ue,r(e.Offerta)+" €",1)])):(n(),i("strong",de,r(e.Costo)+" €",1))]),a("div",fe,r(e.Quantita)+" L",1),a("div",{class:b(["colore-bottiglia",e.Colore])},r(e.Colore),3)],8,le))),128))])]),s[11]||(s[11]=a("hr",null,null,-1)),a("section",me,[s[10]||(s[10]=a("h2",null,"Risultati",-1)),((I=o(f))==null?void 0:I.length)>0?(n(),i("div",_e,[(n(!0),i(k,null,B(o(f),e=>(n(),i("a",{key:e.Id,class:b(["card",{evidenziato:e.Evidenzia}]),onClick:Ie=>l.vaiDettaglio(e.Id),href:`/vino?id=${e.Id}`},[e.Evidenzia?(n(),i("div",ye,"In Evidenza")):C("",!0),a("img",{src:`https://bertolotti.ct.ws/img/vini/${e.Id}.webp`,alt:e.Nome},null,8,he),a("div",ge,[a("h3",null,r(e.Nome+" "+(e!=null&&e.Anno?`(${e.Anno})`:"")),1),a("p",null,r(e.Marca),1),e.Offerta?(n(),i("strong",ve,[a("span",ze,r(e.Costo)+" €",1),a("span",Ve,r(e.Offerta)+" €",1)])):(n(),i("strong",Ce,r(e.Costo)+" €",1))]),a("div",ke,r(e.Quantita)+" L",1),a("div",{class:b(["colore-bottiglia",e.Colore])},r(e.Colore),3)],10,pe))),128))])):(n(),i("h1",be,"Nessun risultato "+r(o(t).search!=""?`per ' ${o(t).search}
        '`:o(t).Marca!=""?`per ' ${o(t).Marca} '`:""),1))])])),o(_)?(n(),V(N,{key:3,obj:o(A)},null,8,["obj"])):(n(),V(T,{key:2}))],64)}}},Se=j(Me,[["__scopeId","data-v-c8d39671"]]);export{Se as default};
