import{_ as N,a as A}from"./rQgUpoam.js";import{_ as j}from"./Jb0QBs_6.js";import{g as v,a as F,_ as K,l as T}from"./qEfkgdYJ.js";import{u as S}from"./B6GcUipP.js";import{_ as G,r as p,C as J,t as r,D as f,E as c,z as $,F as n,G as g,x as t,y as u,H as y,J as I,B as z,A as O,v as i}from"./CX_hZqBa.js";import{V as q}from"./Bg9iiVWQ.js";const Q={class:"hero-section"},R=["src"],U={class:"hero-overlay"},W={class:"hero-text"},X=["innerHTML"],Y=["innerHTML"],Z=["innerHTML"],tt={key:0},et={key:1,class:"eventi-container"},st=["href"],nt=["src","alt"],ot={class:"evento-content"},it={class:"data"},at={class:"descrizione"},lt={class:"eventi-container",id:"pastEvent"},rt=["href"],dt=["src","alt"],ct={class:"evento-content"},ut={class:"data"},mt={class:"descrizione"},pt={key:0,class:"loadMoreDiv"},C=5,gt={__name:"eventi",props:{images:{Type:Array,default:["https://bertolotti.ct.ws/img/events/events0.webp"]},editMode:!1},emits:["changeImage","changeParagraph"],setup(H){S({title:"Eventi"});const l=p(null),h=p(!1),k=p(1),a=H,m=p([]),_=J({title:"",msg:"",link:"",linkMsg:""}),d=p(!1);v("https://bertolotti.ct.ws/getParagraphs?page=eventi").then(function(o){o.ok?m.value=F(o.paragrafi):(d.value=!0,_.msg=o==null?void 0:o.msg)}),v("https://bertolotti.ct.ws/getEventi?basic").then(function(o){o.ok?l.value=o.eventi:(d.value=!0,_.msg=o.msg)});async function E(){let o=await v(`https://bertolotti.ct.ws/getEventi?limit=${C}&offset=${(k.value-1)*C}`);o.ok?o.eventi.length>0?(h.value=!1,l.value.past.push(...o.eventi),k.value++):h.value=!0:(d.value=!0,_.msg=o.msg)}return(o,e)=>{var b,M,x,w,D;const L=N,V=A,P=j,B=K;return i(),r(y,null,[!n(d)&&!a.editMode?(i(),f(L,{key:0})):c("",!0),n(d)?c("",!0):(i(),r("main",{key:1,class:g(a.editMode?"edit":null)},[t("section",Q,[t("img",{class:g(a.editMode?"edit":null),src:a.images[0],alt:"Immagine",onDblclick:e[0]||(e[0]=s=>a.editMode&&o.$emit("changeImage",0))},null,42,R),t("div",U,[t("div",W,[t("h1",{class:g(["titolo",a.editMode?"changeText":null]),onClick:e[1]||(e[1]=s=>a.editMode&&o.$emit("changeParagraph",30)),innerHTML:n(m)[30]},null,10,X),t("h2",{class:g(["sottotitolo",a.editMode?"changeText":null]),onClick:e[2]||(e[2]=s=>a.editMode&&o.$emit("changeParagraph",31)),innerHTML:n(m)[31]},null,10,Y),t("span",{class:g(["paragraph",a.editMode?"changeText":null]),style:{"margin-top":"24px"},onClick:e[3]||(e[3]=s=>a.editMode&&o.$emit("changeParagraph",32)),innerHTML:n(m)[32]},null,10,Z)])])]),e[11]||(e[11]=t("hr",null,null,-1)),(b=n(l))!=null&&b.next?(i(),r("h2",tt,u(((M=n(l))==null?void 0:M.next.length)==0?"Non ci sono ancora eventi futuri in programma!":"Prossimi eventi"),1)):c("",!0),(x=n(l))!=null&&x.next&&((w=n(l))==null?void 0:w.next.length)!=0?(i(),r("div",et,[(i(!0),r(y,null,I(n(l).next,s=>(i(),r("a",{class:"evento-card",key:s.Id,href:`/event?id=${s.Id}`},[t("img",{src:`https://bertolotti.ct.ws/img/event/${s.Id}.webp`,alt:s.Titolo,class:"evento-img"},null,8,nt),t("div",ot,[t("div",null,[t("h2",null,u(s.Titolo),1),t("p",it,u(n(T)(s.Data)),1)]),t("p",at,u(s.Descrizione.length==180?s.Descrizione+"...":s.Descrizione),1),e[5]||(e[5]=t("button",{class:"btn-dettaglio"},"Vedi di più",-1))])],8,st))),128)),e[6]||(e[6]=t("hr",null,null,-1))])):c("",!0),t("div",lt,[e[10]||(e[10]=t("h1",null,"Eventi passati",-1)),t("div",null,[(i(!0),r(y,null,I((D=n(l))==null?void 0:D.past,s=>(i(),r("a",{class:"evento-card",key:s.Id,href:`/event?id=${s.Id}`},[t("img",{src:`https://bertolotti.ct.ws/img/event/${s.Id}.webp`,alt:s.Titolo,class:"evento-img"},null,8,dt),t("div",ct,[t("h2",null,u(s.Titolo),1),t("p",ut,u(n(T)(s.Data)),1),t("p",mt,u(s.Descrizione.length==180?s.Descrizione+"...":s.Descrizione),1),e[7]||(e[7]=t("button",{class:"btn-dettaglio"},"Vedi di più",-1))])],8,rt))),128))]),n(h)?c("",!0):(i(),r("div",pt,[t("button",{onClick:e[4]||(e[4]=s=>E())},[$(q,{class:"icon"},{default:O(()=>e[8]||(e[8]=[z("mdi-arrow-down")])),_:1}),e[9]||(e[9]=z(" Carica altri "))])]))])],2)),n(d)?c("",!0):(i(),f(V,{key:2})),n(d)?(i(),f(P,{key:3,obj:n(_)},null,8,["obj"])):c("",!0),$(B,{show:!n(d)&&!n(l)&&!n(m)},null,8,["show"])],64)}}},bt=G(gt,[["__scopeId","data-v-bdba859e"]]);export{bt as default};
