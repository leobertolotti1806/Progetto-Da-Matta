import{_ as M,r as h,aa as T,o as L,Q as k,t as n,v as d,E as b,y as g,x as i,H as x,J as q,F as c,M as w,G as N,K as I,ab as P,N as $,ac as A,ad as R,ae as B}from"./CX_hZqBa.js";const U={class:"input-group"},z={key:0},E=["required","value"],H={value:"",disabled:"",selected:"",hidden:""},W=["value"],G={key:2,class:"password-wrapper"},J=["type","placeholder","required","minlength","maxlength","pattern","value"],K={key:3,class:"image-input"},Q=["src"],Z={key:1,class:"image-placeholder"},j=["required"],O=["placeholder","required","minlength","maxlength","value"],X={key:5,class:"tel-wrapper"},Y=["value"],_=["placeholder","required"],ee=["placeholder","required","min","max","value"],le=["placeholder","required","value"],te={key:8,class:"checkbox-wrapper"},ae={class:"custom-checkbox"},ue=["checked","required"],ne={class:"checkbox-label"},de=["type","placeholder","required","minlength","maxlength","pattern","value"],ie={__name:"myInput",props:{label:{type:String,default:null},type:{type:String,default:"text"},placeholder:String,required:{type:Boolean,default:null},minlength:{type:Number,default:null},maxlength:{type:Number,default:null},pattern:{type:String,default:null},modelValue:{default:null},defaultValue:{default:null},data:{type:Array,default:()=>[]}},emits:["update:modelValue","changedImage","invioPremuto"],setup(e,{emit:C}){const a=e,r=C,v=h(!1),o=h(null),y=h(null),S="onInvioPremuto"in T().vnode.props;L(()=>{if(a.type==="select"&&a.defaultValue){const u=a.data.find(function(l){return parseInt(a.defaultValue)?l.value==a.defaultValue:l.text.toLowerCase()==a.defaultValue.toLowerCase()});u&&r("update:modelValue",u.value)}else a.type==="image"?a.modelValue?o.value=a.modelValue:a.defaultValue?o.value=`https://bertolotti.ct.ws/img${a.defaultValue}.webp?d=${Math.random()}`:o.value="":a.type==="tel"&&a.defaultValue?(s.value=a.defaultValue.substr(0,3),m.value=a.defaultValue.substr(3),r("update:modelValue",a.defaultValue)):a.defaultValue&&r("update:modelValue",a.defaultValue)});const V=["+39","+01","+33","+49","+34","+41","+31","+32","+48","+30","+47","+48"],s=h(V[0]),m=h("");let p=!0;k(()=>a.modelValue,u=>{if(a.type==="tel"&&u)if(p&&a.defaultValue)p=!1,s.value=a.defaultValue.substr(0,3),m.value=a.defaultValue.substr(3);else{const l=u||a.defaultValue;if(!l)return;const t=s.value+m.value;if(l===t)return;const f=l.match(/^(\+\d{2,3})(\d{6,})$/);f&&(s.value=f[1],m.value=f[2])}else a.type==="image"&&u&&typeof u=="string"&&(o.value=`https://bertolotti.ct.ws/img${u}.webp?d=${Math.random()}`)},{immediate:!0}),k([s,m],()=>{if(a.type==="tel"){const u=s.value+m.value;r("update:modelValue",u)}});function D(u){const l=u.target.files[0];if(l){r("update:modelValue",l),r("changedImage"),o.value=l;const t=new FileReader;t.onload=()=>{o.value=t.result},t.readAsDataURL(l)}}function F(u){const l=u.dataTransfer.files[0];if(me,l&&l.type.startsWith("image/")){const t=new FileReader;t.onload=()=>{o.value=t.result},t.readAsDataURL(l);const f=new DataTransfer;f.items.add(l),y.value.files=f.files,r("update:modelValue",l),r("changedImage")}}return(u,l)=>(d(),n("div",U,[e.label?(d(),n("label",z,g(e.label),1)):b("",!0),e.type==="select"?(d(),n("select",{key:1,required:e.required,value:e.modelValue??e.defaultValue,onChange:l[0]||(l[0]=t=>r("update:modelValue",t.target.value))},[i("option",H,g(e.placeholder||e.defaultValue||"Seleziona un valore"),1),(d(!0),n(x,null,q(e.data,t=>(d(),n("option",{key:t.value,value:t.value},g(t.text),9,W))),128))],40,E)):e.type==="password"?(d(),n("div",G,[i("input",{type:c(v)?"text":"password",placeholder:e.placeholder,required:e.required,minlength:e.minlength,maxlength:e.maxlength,pattern:e.pattern||"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[\\W_]).{8,}$",value:e.modelValue??e.defaultValue,onInput:l[1]||(l[1]=t=>u.$emit("update:modelValue",t.target.value))},null,40,J),i("span",{class:"toggle-password",onClick:l[2]||(l[2]=t=>v.value=!c(v))},g(c(v)?"🙈":"👁️"),1)])):e.type==="image"?(d(),n("div",K,[i("div",{class:"image-drop-area",onDragover:l[3]||(l[3]=w(()=>{},["prevent"])),onDrop:w(F,["prevent"]),onClick:l[4]||(l[4]=t=>c(y).click())},[c(o)?(d(),n("img",{key:0,src:c(o),alt:"Anteprima immagine",class:"preview-img"},null,8,Q)):(d(),n("div",Z,l[13]||(l[13]=[i("span",{class:"icon"},"🖼️",-1),i("p",null,"Trascina qui la tua immagine o clicca sotto",-1)])))],32),e.defaultValue?(d(),n("button",{key:0,type:"button",onClick:l[5]||(l[5]=t=>c(y).click())},"Scegli un'altra immagine")):b("",!0),i("input",{type:"file",accept:"image/*",onChange:D,required:e.required,ref_key:"inputFile",ref:y,class:N(e.defaultValue?"show":"")},null,42,j)])):e.type==="textarea"?(d(),n("textarea",{key:4,placeholder:e.placeholder,required:e.required,minlength:e.minlength,maxlength:e.maxlength,value:e.modelValue??e.defaultValue,onInput:l[6]||(l[6]=t=>u.$emit("update:modelValue",t.target.value))},"        ",40,O)):e.type==="tel"?(d(),n("div",X,[I(i("select",{"onUpdate:modelValue":l[7]||(l[7]=t=>$(s)?s.value=t:null),class:"prefix-select"},[(d(),n(x,null,q(V,t=>i("option",{key:t,value:t},g(t),9,Y)),64))],512),[[P,c(s)]]),I(i("input",{class:"phone-input",type:"tel",placeholder:e.placeholder||"Telefono",required:e.required,pattern:"^\\d{10}$","onUpdate:modelValue":l[8]||(l[8]=t=>$(m)?m.value=t:null),maxlength:"10",inputmode:"numeric"},null,8,_),[[A,c(m)]])])):e.type==="number"?(d(),n("input",{key:6,type:"number",placeholder:e.placeholder,required:e.required,min:e.minlength??0,max:e.maxlength,value:e.modelValue??e.defaultValue,inputmode:"numeric",onInput:l[9]||(l[9]=t=>r("update:modelValue",t.target.value))},null,40,ee)):e.type==="price"?(d(),n("input",{key:7,type:"number",step:"0.01",inputmode:"decimal",placeholder:e.placeholder||"0.00",required:e.required,value:e.modelValue??e.defaultValue,onInput:l[10]||(l[10]=t=>r("update:modelValue",String(t.target.value).replace(",",".")))},null,40,le)):e.type==="checkbox"?(d(),n("div",te,[i("label",ae,[i("input",{type:"checkbox",checked:e.modelValue??e.defaultValue,onChange:l[11]||(l[11]=t=>r("update:modelValue",t.target.checked)),required:e.required},null,40,ue),l[14]||(l[14]=i("span",{class:"checkmark"},null,-1)),i("span",ne,g(e.placeholder||e.label),1)])])):(d(),n("input",R({key:9,type:e.type,placeholder:e.placeholder,required:e.required,minlength:e.minlength,maxlength:e.maxlength,pattern:e.pattern,value:e.modelValue??e.defaultValue,onInput:l[12]||(l[12]=t=>u.$emit("update:modelValue",t.target.value))},B(S?{keyup:t=>t.key==="Enter"&&r("invioPremuto")}:{})),null,16,de))]))}},oe=M(ie,[["__scopeId","data-v-e4a2b371"]]);export{oe as _};
